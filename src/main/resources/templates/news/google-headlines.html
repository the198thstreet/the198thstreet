<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Google 뉴스 아카이브</title>
    <style>
        /* 화면 구성 요소의 의미를 바로 알 수 있도록 최소한의 스타일만 적용했습니다. */
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 16px; }
        th, td { padding: 8px; border-bottom: 1px solid #ddd; }
        th { background: #f5f5f5; text-align: left; }
        .filters { display: flex; gap: 8px; flex-wrap: wrap; }
        .pagination { margin-top: 16px; display: flex; gap: 12px; align-items: center; }
    </style>
</head>
<body>
<h2>Google 뉴스 아카이브</h2>
<p>필터를 입력하고 검색 버튼을 누르면, DB에 저장된 기사 목록을 바로 조회합니다.</p>
<form method="get" class="filters">
    <label>From: <input type="date" name="fromDate" th:value="${fromDate}"/></label>
    <label>To: <input type="date" name="toDate" th:value="${toDate}"/></label>
    <label>Press: <input type="text" name="press" placeholder="언론사" th:value="${press}"/></label>
    <label>Keyword: <input type="text" name="keyword" placeholder="제목" th:value="${keyword}"/></label>
    <label>Size: <input type="number" name="size" min="1" max="100" th:value="${size}"/></label>
    <button type="submit">검색</button>
</form>

<table>
    <thead>
    <tr>
        <th>발행일 (UTC)</th>
        <th>언론사</th>
        <th>기사 제목</th>
    </tr>
    </thead>
    <tbody>
    <!-- headlines 는 단순 List<Map> 입니다. 키 이름으로 바로 접근합니다. -->
    <tr th:each="headline : ${headlines}">
        <td th:text="${#dates.format(headline.TOPIC_PUB_DATE, 'yyyy-MM-dd HH:mm')}"></td>
        <td th:text="${headline.ARTICLE_PRESS_NAME}"></td>
        <td><a th:href="${headline.ARTICLE_URL}" target="_blank" th:text="${headline.ARTICLE_TITLE}"></a></td>
    </tr>
    <tr th:if="${#lists.isEmpty(headlines)}">
        <td colspan="3">조회된 데이터가 없습니다.</td>
    </tr>
    </tbody>
</table>

<div class="pagination" th:if="${totalPages > 0}">
    <a th:if="${hasPrevious}" th:href="@{/news/google/headlines(page=${page - 1},size=${size},fromDate=${fromDate},toDate=${toDate},press=${press},keyword=${keyword})}">이전</a>
    <span th:text="${page + 1}"></span> / <span th:text="${totalPages}"></span>
    <a th:if="${hasNext}" th:href="@{/news/google/headlines(page=${page + 1},size=${size},fromDate=${fromDate},toDate=${toDate},press=${press},keyword=${keyword})}">다음</a>
    <span th:text="'총 ' + ${totalElements} + '건'"></span>
</div>
</body>
</html>
